# 简答题
1. 毛刺是本应该一直稳定为1或0的电信号中，错误出现的短暂的0和1之间的跳变。在组合和时序电路中，毛刺可能出现在或门的输出中，比如：或门的两个输入原本为1和0，如果输入同时变为0和1则输出一直为1，但是如果0变1有一个延时，那么输出则会出现一个短暂的1-0-1的跳变（脉冲）。
2. 卡诺图化简后，可得输出公式为：![](http://latex.codecogs.com/gif.latex?\Y\overline{W}+\overline{Y}W)
3. 卡诺图化简后，可得输出公式为：![](http://latex.codecogs.com/gif.latex?\A\overline{B}+B\overline{C}),今年不考晶体管级别
4. ```asm
    $t0=$t1 NOR 0x1234 可以表示为:
    $t2 = $t1 or 0x1234
    $t3 = $t1 and 0x1234 
    $t1 = $t2 - $t3
    另一种写法
    $t2 = $t1 or 0x1234
    $t0 = $t2 nor $zero
    再另一种情况
    $t2 = $0 + 0x1234
    $t0 = $t1 NOR $t2```
5. 执行时间 = I x CPI x T  
  影响I的因素有：指令集的种类（CISC，RISC），算法，程序设计语言，编译器等等   
  影响CPI的因素有：算法，编译器，ISA（就是指令集的种类）  
  影响T的因素有:ISA，硬件实现  
  
# 分析计算题
## 时序电路的时钟周期分析
1. 分析电路的逻辑功能  
  时钟CLK上升沿到来时，第一个D触发器为透明状态，Q1=D1。同时由于门延时，1ns后，第二个D触发器导通，Q2=D2。随后第一个D触发器的输入变为之前的反，第二个触发器的输入变为D1。所以每个周期两个触发器的输出翻转一次，为一个时钟控制的环形振荡器。
2. 先寻找关键路径的延时，第二个触发器和后面三个反相器共同构成的延时最长，为CLKtoQ的时间，加上四个门延时。所以第一个条件为：时钟周期大于关键路径延时加上建立时间（4+4+2=10ns）。另一个约束为，保持时间显然满足。所以时钟最高频率为1/T=10MHz
3. CLK至FF1控制端之间的逻辑门称为传输门（瞎编的，不会）。如果该门没有延时，则最高工作频率为1/9ns？

## MIPS机器码转换及翻译
机器码 | 二进制 | MIPS指令
----  | ---- | ----
0x20080000 |  0010_0000_0000_1000_0000_0000_0000_0000 | addi $8 $0 0
0x20090001 |  0010_0000_0000_1001_0000_0000_0000_0001 | addi $9 $0 1
0x0089502A |  0000_0000_1000_1001_0101_0000_0010_1010 | slt $10 $4 $9
0x15400003 |  0001_0101_0100_0000_0000_0000_0000_0011 | beq $21 $0 3
0x01094020 |  0000_0001_0000_1001_0100_0000_0010_0000 | add $20 $4 $4
0x21290002 |  0010_0001_0010_1001_0000_0000_0000_0010 | 
0x08100002 |  0000_1000_0001_0000_0000_0000_0000_0010
0x01001020 |  0000_0001_0000_0000_0001_0000_0010_0000

## 储存器系统
储存器 | 方式 | 命中率 | 访问时间 | 容量 | 块大小
---   | ---  | ---    | ---     | ---  | ---
L1    | 4路组相联 | H1 | t1     | 8KB  | 16B
L2    | 直接映射   | H2 | t2     | 4MB | 64B

1. L1中的标签位：L1中有8KB/16B=2^9个块，4路组相连，则有2^7个组。块内地址有4位，组号有7位，所以标签有21位。
2. L2中的标签位：L2中有4MB/64B=2^16个块，直接映射，有2^16个组。块内地址6位，组号16位，标签有10位。
3. 平均访问时间：首先访问L1，H1*t1，之后访问L2，（1-H1）*H2*(t2+t1)，最后访问主存，（1-H1)(1-H2)*(t1+t2+tm)。

## 流水线
```asm
add $t0, $s0, $s1
sub $t0, $t0, $s2
lw  $t1, 60($t0)
and $t2, $t1, $t0
```
1. 没有转发单元和冒险检测单元，编译器插入NOP指令。插入后的代码如下：
```asm
add $t0, $s0, $s1
NOP
NOP
sub $t0, $t0, $s2
NOP
NOP
lw  $t1, 60($t0)
NOP
NOP
and $t2, $t1, $t0
```
2. 如果存在转发单元和冒险检测单元，1-2可以不用延时，2-3也可以不用延时，只需要将上一周期ALU运算结果保留即可。3-4需要stall一个周期。所以一共需要9个周期。
3. 转发直接将ALU的输出连接至下一个周期的ALU的输入即可，阻塞怎么画（画气泡)？

# 设计题
## 设计正脉冲检测电路
题目说明：如果N=1表明时单周期毛刺干扰，需要滤除。输入信号经过D触发器采样后得到的，与CLK同步。脉冲检测电路采用同一时钟源CLK。
1. 如果检测到一个脉冲

## MIPS单周期
1. jal:R[31]=PC+4, PC=JumpAddr  
为了增加jal，需要将PC+4信号接至寄存器的WriteData，并在此处增加一个多路选择器和控制信号（PCtoReg)。同时需要在WriteRegsister的多路选择器上多接一个恒为31的值，并且将RegDst变为RegDst[1:0]。
2. slti:R[rt]=(R[rs]<SignExtImm)?1:0    
为了增加slti，主控制单元Control需要修改。
3. 为了支持jal，主控制单元需要增加PCtoReg,和修改RegDst[1:0]，ALU控制不用修改。
4. 为了支持slti，主控制单元需要将slti的Opcode翻译为slt对应的ALUOP，ALU控制需要改吗?
5. 
